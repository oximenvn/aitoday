<!DOCTYPE html>
<html lang="en-us" dir="ltr">
<head>
  <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Prefill và Giải mã cho các Yêu cầu Đồng thời - Tối ưu hóa Hiệu suất LLM | AI Today - SkyAI</title>

<meta name="description" content="Prefill và Giải mã cho các Yêu cầu Đồng thời - Tối ưu hóa Hiệu suất LLM">
      <link rel="stylesheet" href="/css/main.min.584aed796ba9d245f84009d57da9662e9c02059611972780263728b442fc25ff.css" integrity="sha256-WErteWup0kX4QAnVfalmLpwCBZYRlyeAJjcotEL8Jf8=" crossorigin="anonymous">

<link rel="icon" type="image/svg+xml" href="https://aitoday.skyai.vn/favicon.svg"> 
<link rel="icon" type="image/x-icon" href="https://aitoday.skyai.vn/favicon.ico"> 
<link rel="icon" type="image/png" sizes="16x16" href="https://aitoday.skyai.vn/favicon.png"> 
<link rel="icon" type="image/png" sizes="32x32" href="https://aitoday.skyai.vn/favicon-32.png"> 
<link rel="icon" type="image/png" sizes="64x64" href="https://aitoday.skyai.vn/favicon-64.png"> 

</head>
<body>
  <header class="py-6 border-b"><div class="max-w-7xl mx-auto px-4 md:px-6 lg:px-8 flex flex-col">
	<div class="flex items-center">
		<div class="flex items-center">
			<button class="flex items-center space-x-2 rounded-full border py-1 pr-[5px] pl-3 group bg-zinc-100 hover:bg-zinc-200 toggle-button" data-target="menu-bar">
				<svg width="22" height="22" fill="currentColor" viewBox="0 0 16 16">
					<path fill-rule="evenodd" d="M2.5 12a.5.5 0 0 1 .5-.5h10a.5.5 0 0 1 0 1H3a.5.5 0 0 1-.5-.5zm0-4a.5.5 0 0 1 .5-.5h10a.5.5 0 0 1 0 1H3a.5.5 0 0 1-.5-.5zm0-4a.5.5 0 0 1 .5-.5h10a.5.5 0 0 1 0 1H3a.5.5 0 0 1-.5-.5z"></path>
				</svg>
				<span class="bg-blue-500 fill-white rounded-full p-1.5">
					<svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" fill="currentColor" class="group-hover:animate-spin bi bi-egg-fried fill-white" viewBox="0 0 16 16">
						<path d="M8 11a3 3 0 1 0 0-6 3 3 0 0 0 0 6z"></path>
						<path d="M13.997 5.17a5 5 0 0 0-8.101-4.09A5 5 0 0 0 1.28 9.342a5 5 0 0 0 8.336 5.109 3.5 3.5 0 0 0 5.201-4.065 3.001 3.001 0 0 0-.822-5.216zm-1-.034a1 1 0 0 0 .668.977 2.001 2.001 0 0 1 .547 3.478 1 1 0 0 0-.341 1.113 2.5 2.5 0 0 1-3.715 2.905 1 1 0 0 0-1.262.152 4 4 0 0 1-6.67-4.087 1 1 0 0 0-.2-1 4 4 0 0 1 3.693-6.61 1 1 0 0 0 .8-.2 4 4 0 0 1 6.48 3.273z"></path>
					</svg>
				</span>
			</button>
			<div class="relative rounded-full py-1.5 px-6 bg-zinc-100 hover:bg-zinc-200 text-xl font-bold uppercase mx-2">
				<h2><a class="before:content-[''] before:z-10 before:top-0 before:right-0 before:left-0 before:bottom-0 before:absolute before:pointer-events-auto" href="https://aitoday.skyai.vn/">AI Today - SkyAI</a></h2>
			</div>
		</div>
		<div class="flex items-center ml-auto">
			<button class="flex items-center rounded-full p-3 bg-zinc-100 hover:bg-zinc-200 toggle-button" data-target="search-bar">
				<svg width="18" height="18" fill="currentColor" viewBox="0 0 16 16">
					<path id="path1" class="transition-all ease-linear" d="M11.742 10.344a6.5 6.5 0 1 0-1.397 1.398h-.001c.03.04.062.078.098.115l3.85 3.85a1 1 0 0 0 1.415-1.414l-3.85-3.85a1.007 1.007 0 0 0-.115-.1zM12 6.5a5.5 5.5 0 1 1-11 0 5.5 5.5 0 0 1 11 0z"></path>
					<path id="path2" class="transition-all ease-linear hidden" d="M2.146 2.854a.5.5 0 1 1 .708-.708L8 7.293l5.146-5.147a.5.5 0 0 1 .708.708L8.707 8l5.147 5.146a.5.5 0 0 1-.708.708L8 8.707l-5.146 5.147a.5.5 0 0 1-.708-.708L7.293 8 2.146 2.854Z"></path>
				</svg>
			</button>
		</div>
	</div>
  <nav id="menu-bar" class="block mt-3 close">
    <ul class="flex items-center flex flex-nowrap whitespace-nowrap overflow-x-auto space-x-4">
    <li class="my-2">
      <a class="rounded-full border px-6 py-2 bg-zinc-100 hover:bg-zinc-200" href="/">Home</a>
    </li>
    <li class="my-2">
      <a class="rounded-full border px-6 py-2 bg-zinc-100 hover:bg-zinc-200">About</a>
    </li>
    <li class="my-2">
      <a class="rounded-full border px-6 py-2 bg-zinc-100 hover:bg-zinc-200" href="/tags/">Tags</a>
    </li>
    <li class="my-2">
      <a class="rounded-full border px-6 py-2 bg-zinc-100 hover:bg-zinc-200" href="/tags/">Taxonomy</a>
    </li>
    </ul>
  </nav>
<div id="search-bar" class="block mt-3 close">
	<form id="search" class="flex items-stretch">
		<input class="w-full block px-6 py-2 rounded-l-full focus:outline-none border border-zinc-200" type="text" placeholder="Search...">
		<button class="flex items-center px-7 py-2.5 rounded-r-full border border-zinc-200 ">
			<svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" fill="currentColor" class="group-hover:animate-pulse" viewBox="0 0 16 16">
				<path d="M11.742 10.344a6.5 6.5 0 1 0-1.397 1.398h-.001c.03.04.062.078.098.115l3.85 3.85a1 1 0 0 0 1.415-1.414l-3.85-3.85a1.007 1.007 0 0 0-.115-.1zM12 6.5a5.5 5.5 0 1 1-11 0 5.5 5.5 0 0 1 11 0z"></path>
			</svg>
		</button>
	</form>
</div>
</div></header>
  <main class="max-w-7xl mx-auto px-4 md:px-6 lg:px-8"><div id="breadcrumb" class="max-w-7xl mx-auto py-8">
	<ul class="flex space-x-4 text-sm text-zinc-500">
		<li class="after:content-['❯'] after:ml-4 after:opacity-30 last:after:content-none uppercase">
			<a href="https://aitoday.skyai.vn/">AI Today - SkyAI</a>
		</li>
		<li class="after:content-['❯'] after:ml-4 after:opacity-30 last:after:content-none uppercase">
			<a href="https://aitoday.skyai.vn/posts/">Posts</a>
		</li>
	</ul>
</div><div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-14">

  <article class="md:col-span-2 prose lg:prose-lg">

    <header class="not-prose">
      
      <h1 id="title" class="text-4xl font-bold leading-normal">Prefill và Giải mã cho các Yêu cầu Đồng thời - Tối ưu hóa Hiệu suất LLM</h1>

      <div id="lead" class="my-6">

        <p class="font-bold">Prefill và Giải mã cho các Yêu cầu Đồng thời - Tối ưu hóa Hiệu suất LLM </p>

      </div>
      
      <div id="writer" class="flex items-center space-x-4"><ul class="flex items-center space-x-4 flex-nowrap whitespace-nowrap overflow-x-auto">
          
          <li class="font-semibold my-2"></li>
          
          <li class="before:content-['•'] before:mr-2 before:opacity-50 my-2"><time datetime="2025-11-26T00:00:00&#43;00:00">November 26, 2025</time>
          </li>

          <li class="before:content-['•'] before:mr-2 before:opacity-50 my-2">
            12 min read
          </li>

        </ul>

      </div>
      
    </header>

    <figure id="featureimage" class="rounded-xl aspect-video">

          <img class="rounded-lg" src="https://cdn-avatars.huggingface.co/v1/production/uploads/6633a97f48350281a60069c1/3GO_f_ovY6JJWEgn0OE2r.png" alt="Prefill và Giải mã cho các Yêu cầu Đồng thời - Tối ưu hóa Hiệu suất LLM">
        <figcaption class="text-center italic text-xs">Prefill và Giải mã cho các Yêu cầu Đồng thời - Tối ưu hóa Hiệu suất LLM</figcaption>

    </figure>

    <div id="content" class="mb-14">
      <h1 id="prefill-và-decode-cho-yêu-cầu-đồng-thời---tối-ưu-hóa-hiệu-suất-llm">Prefill và Decode cho Yêu cầu Đồng thời - Tối ưu hóa Hiệu suất LLM</h1>
<p>Việc xử lý đồng thời tải từ nhiều người dùng là rất quan trọng đối với hiệu suất của các ứng dụng LLM. Trong phần trước của chuỗi bài viết về hiệu suất LLM, chúng tôi đã thảo luận về các chiến lược xếp hàng để ưu tiên các người dùng khác nhau. Trong phần thứ hai này, chúng ta sẽ tập trung vào việc xử lý đồng thời các yêu cầu và cách nó ảnh hưởng đến các chỉ số quan trọng như độ trễ và thông lượng, cũng như việc sử dụng tài nguyên GPU.</p>
<!-- raw HTML omitted -->
<p>Tại TNG, chúng tôi tự lưu trữ nhiều Mô hình Ngôn ngữ Lớn trên cụm 24 GPU H100 của mình. Nó hỗ trợ 50 ứng dụng khác nhau, xử lý hơn 5.000 lượt suy luận mỗi giờ và tạo ra hơn mười triệu token mỗi ngày.</p>
<h2 id="hai-giai-đoạn-tạo-token-prefill-và-decode">Hai Giai đoạn Tạo Token: Prefill và Decode</h2>
<p>Hầu hết các LLM tạo văn bản từng token, điều này đảm bảo rằng mọi token mới được tính toán dựa trên tất cả các token trước đó (thuộc tính mô hình này được gọi là <em>tự hồi quy</em>). Token đầu ra đầu tiên phụ thuộc vào tất cả các token trong prompt, nhưng token đầu ra thứ hai đã phụ thuộc vào tất cả các token trong prompt <em>cộng với</em> token đầu tiên, v.v. Do đó, việc tạo token không thể song song hóa ở cấp độ của từng yêu cầu riêng lẻ.</p>
<p>Trong các LLM có cơ chế chú ý, việc tính toán một token mới đòi hỏi phải tính toán các vector <em>key</em>, <em>value</em> và <em>query</em> cho mỗi token trước đó. May mắn thay, kết quả của một số phép tính cụ thể có thể được tái sử dụng cho các token sau đó. Khái niệm này được gọi là bộ nhớ đệm key-value (KV cache). Đối với mỗi token đầu ra bổ sung, chỉ cần tính toán một bộ vector <em>key</em> và <em>value</em> nữa và thêm vào KV cache. Tuy nhiên, đối với token đầu ra đầu tiên, chúng ta bắt đầu với một KV cache trống và cần tính toán số lượng bộ vector <em>key</em> và <em>value</em> tương ứng với số lượng token trong prompt đầu vào. May mắn thay, và trái ngược với bất kỳ lần tạo token nào sau này, tất cả các token đầu vào đều đã biết từ đầu và chúng ta có thể song song hóa việc tính toán các vector <em>key</em> và <em>value</em> tương ứng của chúng. Sự khác biệt này thúc đẩy sự phân biệt giữa <strong>prefill (tính toán token đầu ra đầu tiên)</strong> và <strong>giai đoạn decode (tính toán bất kỳ token nào sau đó)</strong>.</p>
<p>Trong giai đoạn prefill, các phép tính cho tất cả các token đầu vào có thể được thực thi song song, trong khi trong giai đoạn decode, không thể song song hóa ở cấp độ yêu cầu riêng lẻ.</p>
<!-- raw HTML omitted -->
<h3 id="metrics">Metrics</h3>
<p>Sự khác biệt giữa giai đoạn prefill và decode cũng được phản ánh trong hai chỉ số chính cho việc tạo văn bản: <em>Thời gian đến token đầu tiên</em> và <em>thời gian cho mỗi token đầu ra</em>. <em><!-- raw HTML omitted -->Thời gian đến token đầu tiên<!-- raw HTML omitted --></em> được cho bởi độ trễ của giai đoạn prefill, trong khi <em><!-- raw HTML omitted -->thời gian cho mỗi token đầu ra<!-- raw HTML omitted --></em> là độ trễ của một bước decode duy nhất. Mặc dù giai đoạn prefill cũng chỉ tạo ra một token, nhưng nó mất nhiều thời gian hơn một bước decode duy nhất, vì tất cả các token đầu vào cần được xử lý. Mặt khác, giai đoạn prefill nhanh hơn nhiều đối với số lượng token đầu vào so với giai đoạn decode cho cùng số lượng token đầu ra (sự khác biệt này là lý do tại sao các API LLM thương mại tính phí token đầu vào ở mức thấp hơn nhiều so với token đầu ra).</p>
<!-- raw HTML omitted -->
<p>Cả hai độ trễ đều là các chỉ số quan trọng đối với các ứng dụng tương tác như chatbot. Nếu người dùng phải đợi hơn 5 giây trước khi họ thấy phản hồi, họ có thể nghĩ rằng ứng dụng bị lỗi và rời đi. Tương tự, nếu việc tạo văn bản chậm như 1 token mỗi giây, họ sẽ không đủ kiên nhẫn để đợi cho đến khi hoàn thành. Các mục tiêu độ trễ điển hình cho các ứng dụng tương tác là 100-300ms cho mỗi token đầu ra (tức là tốc độ tạo token từ 3-10 token mỗi giây, ít nhất nhanh bằng tốc độ đọc, lý tưởng cho phép xem lướt qua văn bản khi nó đang được tạo), và <em>thời gian đến token đầu tiên</em> là 3 giây trở xuống. Cả hai mục tiêu độ trễ này đều có thể khá khó khăn để đạt được, tùy thuộc vào kích thước mô hình, phần cứng, độ dài prompt và tải đồng thời.</p>
<p>Các trường hợp sử dụng khác, không tương tác, có thể không quan tâm đến độ trễ của các yêu cầu riêng lẻ, mà chỉ quan tâm đến <em><!-- raw HTML omitted -->thông lượng token<!-- raw HTML omitted --></em> tổng thể (token mỗi giây, tổng hợp trên tất cả các yêu cầu đồng thời). Điều này có thể liên quan khi bạn muốn tạo bản dịch cho sách hoặc tóm tắt các tệp mã trong một kho lưu trữ lớn.</p>
<p>Như chúng ta sẽ thấy trong phần sau, nhìn chung có sự đánh đổi giữa việc tối đa hóa thông lượng tổng thể và giảm thiểu độ trễ cho mỗi yêu cầu riêng lẻ.</p>
<h3 id="sử-dụng-tài-nguyên">Sử dụng Tài nguyên</h3>
<p>Do phép tính song song cho tất cả các token đầu vào, giai đoạn prefill rất chuyên sâu về tính toán GPU. Ngược lại, bước decode cho một token đầu ra riêng lẻ sử dụng rất ít sức mạnh tính toán; ở đây, tốc độ thường bị giới hạn bởi băng thông bộ nhớ GPU, tức là mức độ nhanh chóng mà trọng số mô hình và các kích hoạt (bao gồm cả vector <em>key</em> và <em>value</em>) có thể được tải từ và truy cập trong bộ nhớ GPU.</p>
<p>Nhìn chung, thông lượng token có thể tăng cho đến khi việc sử dụng GPU (liên quan đến sức mạnh tính toán) bị bão hòa. Trong giai đoạn prefill, một yêu cầu duy nhất với prompt dài đã có thể đạt được việc sử dụng GPU tối đa. Trong giai đoạn decode, việc <em><!-- raw HTML omitted -->sử dụng GPU có thể tăng lên bằng cách xử lý hàng loạt<!-- raw HTML omitted --></em> nhiều yêu cầu. Do đó, khi bạn vẽ biểu đồ thông lượng token theo số lượng yêu cầu đồng thời, bạn thấy sự gia tăng thông lượng gần như tuyến tính ở mức độ đồng thời thấp, vì chế độ giới hạn bộ nhớ này hưởng lợi từ kích thước lô lớn hơn. Khi việc sử dụng GPU bão hòa và chế độ giới hạn tính toán được nhập, thông lượng sẽ không đổi với sự gia tăng độ đồng thời.</p>
<!-- raw HTML omitted -->
<h2 id="xử-lý-đồng-thời">Xử lý Đồng thời</h2>
<p>Bây giờ chúng ta sẽ xem xét chính xác cách một engine suy luận xử lý nhiều yêu cầu đến trong một khoảng thời gian ngắn.</p>
<p>Cả giai đoạn prefill và decode đều có thể tận dụng các chiến lược batching để áp dụng cùng một tập hợp các hoạt động cho các yêu cầu khác nhau. Nhưng hậu quả của việc chạy prefill và decode của các yêu cầu khác nhau cùng một lúc là gì?</p>
<h3 id="static-batching-so-với-continuous-batching">Static Batching so với Continuous Batching</h3>
<p>Hình thức batching ngây thơ nhất được gọi là <em><!-- raw HTML omitted -->static batching<!-- raw HTML omitted --></em>. (1) Bạn bắt đầu với một batch trống, (2) bạn điền batch với càng nhiều mục đang chờ xử lý và phù hợp với batch càng tốt, (3) bạn xử lý batch cho đến khi tất cả các mục trong batch hoàn thành, và (4) bạn lặp lại quy trình với một batch trống mới.</p>
<p>Tất cả các yêu cầu bắt đầu giai đoạn prefill của chúng cùng một lúc. Vì prefill chỉ là một hoạt động GPU duy nhất, nhưng được song song hóa mạnh mẽ (coi nó như một phép nhân ma trận rất lớn), các giai đoạn prefill của tất cả các yêu cầu đồng thời sẽ hoàn thành cùng một lúc. Sau đó, tất cả các giai đoạn decode bắt đầu đồng thời. Các yêu cầu có ít token đầu ra hơn sẽ hoàn thành sớm hơn, nhưng vì static batching, yêu cầu chờ tiếp theo chỉ có thể bắt đầu khi yêu cầu được batch lâu nhất hoàn thành.</p>
<!-- raw HTML omitted -->
<p>*<!-- raw HTML omitted -->Static batching tối ưu hóa <em>thời gian cho mỗi token đầu ra</em><!-- raw HTML omitted -->, vì giai đoạn decode không bị gián đoạn. Nhược điểm là việc sử dụng tài nguyên rất kém hiệu quả. Vì một prompt dài đã có thể làm bão hòa sức mạnh tính toán trong giai đoạn prefill, việc xử lý nhiều giai đoạn prefill song song không mang lại tốc độ nhanh hơn và chắc chắn sẽ tối đa hóa việc sử dụng GPU. Ngược lại, GPU có khả năng bị sử dụng dưới mức tối ưu trong giai đoạn decode, vì ngay cả một số lượng lớn các giai đoạn decode đồng thời cũng không chuyên sâu về tính toán như giai đoạn prefill cho một prompt dài.</p>
<p>Tuy nhiên, nhược điểm lớn nhất là <em>thời gian đến token đầu tiên</em> có thể kéo dài. Ngay cả khi một số yêu cầu ngắn hoàn thành sớm, yêu cầu xếp hàng tiếp theo phải chờ cho giai đoạn decode dài nhất trong batch hoàn thành trước khi giai đoạn prefill của nó có thể bắt đầu. Do lỗi này của static batching, các engine suy luận thường triển khai các chiến lược <em><!-- raw HTML omitted -->continuous batching<!-- raw HTML omitted --></em>. Ở đây, bất kỳ yêu cầu nào hoàn thành đều được xóa ngay lập tức khỏi batch và khoảng trống trong batch được lấp đầy bằng yêu cầu tiếp theo trong hàng đợi. Do đó, mọi chiến lược continuous batching đều phải đối phó với sự đồng thời giữa các giai đoạn prefill và decode.</p>
<h3 id="prefill-first">Prefill-First</h3>
<p>Để giảm thời gian chờ đợi của các yêu cầu, các engine suy luận như vLLM và TGI lên lịch giai đoạn prefill của các yêu cầu mới ngay khi chúng đến và phù hợp với batch hiện tại. Có thể chạy giai đoạn prefill của các yêu cầu mới song song với một bước decode duy nhất cho mỗi yêu cầu trước đó, nhưng vì mọi thứ đều được thực thi trong cùng một hoạt động GPU, thời lượng của nó bị chi phối bởi giai đoạn prefill, và đối với mỗi yêu cầu trong giai đoạn decode, chỉ có thể tạo ra một token đầu ra trong khoảng thời gian đó. Do đó, việc *<!-- raw HTML omitted -->ưu tiên prefill này giảm thiểu <em>thời gian đến token đầu tiên</em><!-- raw HTML omitted --> nhưng làm gián đoạn giai đoạn decode của các yêu cầu đã chạy. Trong một ứng dụng trò chuyện, người dùng có thể trải nghiệm điều này như một sự tạm dừng của việc tạo token được truyền tải khi những người dùng khác gửi prompt dài.</p>
<p>Trong phép đo sau đây, bạn có thể thấy hiệu quả của continuous batching với chiến lược prefill-first.</p>
<!-- raw HTML omitted -->
<h3 id="chunked-prefill">Chunked Prefill</h3>
<p>Một cách tiếp cận để giảm tác động của các giai đoạn prefill bị gián đoạn đối với các giai đoạn decode đang chạy là <em>chunked prefill</em>. Thay vì xử lý toàn bộ prompt trong một bước prefill duy nhất, nó có thể được phân phối trên nhiều chunk. Khi đó có thể có nhiều bước decode đồng thời trong giai đoạn prefill như có số lượng chunk prefill (so với chỉ một bước decode cho mỗi yêu cầu đồng thời trong toàn bộ giai đoạn prefill). Một bước prefill được chunked sẽ vẫn mất nhiều thời gian hơn một bước decode riêng biệt, nhưng với kích thước chunk nhỏ, người dùng hiện chỉ trải nghiệm sự chậm lại của việc tạo token thay vì tạm dừng hoàn toàn; điều này làm giảm trung bình <em>thời gian cho mỗi token đầu ra</em>. Từ góc độ của yêu cầu bị gián đoạn, một giai đoạn prefill được chunked đi kèm với một số chi phí và mất nhiều thời gian hơn một giai đoạn prefill riêng biệt, liên tục, do đó có sự gia tăng nhỏ trong <em>thời gian đến token đầu tiên</em>. Với kích thước chunk, chúng ta hiện có một <em><!-- raw HTML omitted -->nút điều chỉnh để ưu tiên <em>thời gian đến token đầu tiên</em> hoặc <em>thời gian cho mỗi token đầu ra</em></em>*. Kích thước chunk điển hình là từ 512 đến 8192 token (mặc định của vLLM là 512 khi chunked prefill lần đầu tiên được triển khai và sau đó được cập nhật lên các giá trị cao hơn).</p>
<!-- raw HTML omitted -->
<p>Tuy nhiên, lợi thế lớn nhất của chiến lược này là <em><!-- raw HTML omitted -->chunked prefill tối đa hóa hiệu quả tài nguyên<!-- raw HTML omitted --></em>. Prefill chuyên sâu về tính toán, trong khi decode bị giới hạn bởi bộ nhớ. Bằng cách chạy cả hai hoạt động song song, người ta có thể tăng thông lượng tổng thể mà không bị giới hạn bởi tài nguyên GPU. Tất nhiên, hiệu quả tối đa chỉ đạt được ở một kích thước chunk nhất định, điều này lần lượt phụ thuộc vào mô hình tải cụ thể.</p>
<p>Trong một triển khai vLLM tiêu chuẩn và đối với các yêu cầu có kích thước bằng nhau, chúng tôi nhận thấy rằng <em><!-- raw HTML omitted -->chunked prefill đã tăng tổng thông lượng token lên +50%<!-- raw HTML omitted --></em>. Hiện tại, nó được kích hoạt cho mọi triển khai vLLM của LLM tự lưu trữ tại TNG. Nhìn chung, chunked prefill là một chiến lược mặc định tốt cho hầu hết các trường hợp sử dụng. Tuy nhiên, việc tối ưu hóa kích thước chunk khá khó khăn trong môi trường có các mẫu tải không thể đoán trước (như TNG với nhiều ứng dụng đa dạng của nó); thông thường, bạn sẽ giữ nguyên cài đặt mặc định.</p>
<p>Bất kể cấu hình kích thước chunk chính xác là gì, việc xử lý đồng thời với chunked prefill đi kèm với hai thách thức mà chúng ta sẽ giải quyết trong bài viết tiếp theo.</p>
<h3 id="link-bài-viết-gốc"><a href="https://huggingface.co/blog/tngtech/llm-performance-prefill-decode-concurrent-requests">Link bài viết gốc</a></h3>


    <ul id="taxonomy" class="not-prose flex items-center space-x-4 flex-nowrap whitespace-nowrap overflow-x-auto">

      <li class="font-semibold my-4">Tags:</li>
        <li ><a class="py-2 px-6 border rounded-full hover:bg-zinc-100 active:bg-zinc-300" href="/tags/ai/">Ai</a></li>
        <li ><a class="py-2 px-6 border rounded-full hover:bg-zinc-100 active:bg-zinc-300" href="/tags/25-th%C3%A1ng-11-2025/">25 Tháng 11, 2025</a></li>
        <li ><a class="py-2 px-6 border rounded-full hover:bg-zinc-100 active:bg-zinc-300" href="/tags/huggingface.co/">Huggingface.co</a></li>
    </ul>
</div>

    <footer id="content-footer" class="not-prose">

      

      <div id="author-box" class="my-8 md:my-14 border p-8 bg-zinc-100 rounded-2xl">

        <img class="w-20 h-20 rounded-full" src="" alt="">

        <h2 class="text-xl font-bold my-4">Writter by : </h2>

        <p class="mb-4"></p>

        <ul class="flex flex-wrap space-x-4">
          <li>
            <a class="flex items-center decoration-auto hover:underline" href="https://facebook.com/luat.skyai/" target="_blank" rel="noopener">
              <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" viewBox="0 0 16 16">
                <path d="M16 8.049c0-4.446-3.582-8.05-8-8.05C3.58 0-.002 3.603-.002 8.05c0 4.017 2.926 7.347 6.75 7.951v-5.625h-2.03V8.05H6.75V6.275c0-2.017 1.195-3.131 3.022-3.131.876 0 1.791.157 1.791.157v1.98h-1.009c-.993 0-1.303.621-1.303 1.258v1.51h2.218l-.354 2.326H9.25V16c3.824-.604 6.75-3.934 6.75-7.951z"/>
              </svg>
              <span class="ml-2">Facebook</span>
            </a>
          </li>
          <li>
            <a class="flex items-center decoration-auto hover:underline" href="https://facebook.com/luat.skyai/" target="_blank" rel="noopener">
              <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" viewBox="0 0 16 16">
                  <path d="M12.6.75h2.454l-5.36 6.142L16 15.25h-4.937l-3.867-5.07-4.425 5.07H.316l5.733-6.57L0 .75h5.063l3.495 4.633L12.601.75Zm-.86 13.028h1.36L4.323 2.145H2.865l8.875 11.633Z"/>
              </svg>
              <span class="ml-2">Twitter</span>
            </a>
          </li>
          <li>
            <a class="flex items-center decoration-auto hover:underline" href="https://luat.skyai.vn/" target="_blank" rel="noopener">
              <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" viewBox="0 0 16 16">
                    <path d="M8 0C5.829 0 5.556.01 4.703.048 3.85.088 3.269.222 2.76.42a3.917 3.917 0 0 0-1.417.923A3.927 3.927 0 0 0 .42 2.76C.222 3.268.087 3.85.048 4.7.01 5.555 0 5.827 0 8.001c0 2.172.01 2.444.048 3.297.04.852.174 1.433.372 1.942.205.526.478.972.923 1.417.444.445.89.719 1.416.923.51.198 1.09.333 1.942.372C5.555 15.99 5.827 16 8 16s2.444-.01 3.298-.048c.851-.04 1.434-.174 1.943-.372a3.916 3.916 0 0 0 1.416-.923c.445-.445.718-.891.923-1.417.197-.509.332-1.09.372-1.942C15.99 10.445 16 10.173 16 8s-.01-2.445-.048-3.299c-.04-.851-.175-1.433-.372-1.941a3.926 3.926 0 0 0-.923-1.417A3.911 3.911 0 0 0 13.24.42c-.51-.198-1.092-.333-1.943-.372C10.443.01 10.172 0 7.998 0h.003zm-.717 1.442h.718c2.136 0 2.389.007 3.232.046.78.035 1.204.166 1.486.275.373.145.64.319.92.599.28.28.453.546.598.92.11.281.24.705.275 1.485.039.843.047 1.096.047 3.231s-.008 2.389-.047 3.232c-.035.78-.166 1.203-.275 1.485a2.47 2.47 0 0 1-.599.919c-.28.28-.546.453-.92.598-.28.11-.704.24-1.485.276-.843.038-1.096.047-3.232.047s-2.39-.009-3.233-.047c-.78-.036-1.203-.166-1.485-.276a2.478 2.478 0 0 1-.92-.598 2.48 2.48 0 0 1-.6-.92c-.109-.281-.24-.705-.275-1.485-.038-.843-.046-1.096-.046-3.233 0-2.136.008-2.388.046-3.231.036-.78.166-1.204.276-1.486.145-.373.319-.64.599-.92.28-.28.546-.453.92-.598.282-.11.705-.24 1.485-.276.738-.034 1.024-.044 2.515-.045v.002zm4.988 1.328a.96.96 0 1 0 0 1.92.96.96 0 0 0 0-1.92zm-4.27 1.122a4.109 4.109 0 1 0 0 8.217 4.109 4.109 0 0 0 0-8.217zm0 1.441a2.667 2.667 0 1 1 0 5.334 2.667 2.667 0 0 1 0-5.334z"/>

              </svg>
              <span class="ml-2">Instagram</span>
            </a>
          </li>

        </ul>
        
      </div>

      <div id="related-post" class="">

        <h2 class="text-xl md:text-2xl font-bold mb-6 md:mb-8">Recommended for You</h2><div class="grid grid-cols-1 md:grid-cols-2 gap-6"><article class="relative group bg-zinc-100 hover:bg-blue-100 rounded-3xl">
	
	<a class="insert-link" href="https://aitoday.skyai.vn/posts/2025-11-26/324834/"></a>

	<figure class="w-full aspect-video overflow-hidden rounded-3xl">

			<img class="object-cover group-hover:scale-105 transition duration-500 cursor-pointer" src="https://cdn-avatars.huggingface.co/v1/production/uploads/6123945a0ed258ebc83f3d56/8wMHFQHEV24G_ljl4kPxQ.jpeg" alt="Batching liên tục từ những nguyên tắc cơ bản" style="width: 100%; height: 100%; object-fit: cover;">

	  </figure>

	<div class="p-6">

		<time datetime="2025-11-26T00:00:00&#43;00:00">Nov 26, 2025</time>

		<h3 class="my-4 text-2xl font-bold">Batching liên tục từ những nguyên tắc cơ bản</h3>

		<p class="text-normal leading-normal text-zinc-500 line-clamp-2">Batching liên tục từ những nguyên tắc cơ bản</p>

	</div>
</article><article class="relative group bg-zinc-100 hover:bg-blue-100 rounded-3xl">
	
	<a class="insert-link" href="https://aitoday.skyai.vn/posts/2025-11-26/28000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000/"></a>

	<figure class="w-full aspect-video overflow-hidden rounded-3xl">

			<img class="object-cover group-hover:scale-105 transition duration-500 cursor-pointer" src="https://cdn-avatars.huggingface.co/v1/production/uploads/65c992424936ab38ecf706b0/aq7vuHFPO1S93fwJk0Cuq.jpeg" alt="DeLERP- Nội suy Tuyến tính Phân rã để Hợp nhất Mô hình" style="width: 100%; height: 100%; object-fit: cover;">

	  </figure>

	<div class="p-6">

		<time datetime="2025-11-26T00:00:00&#43;00:00">Nov 26, 2025</time>

		<h3 class="my-4 text-2xl font-bold">DeLERP- Nội suy Tuyến tính Phân rã để Hợp nhất Mô hình</h3>

		<p class="text-normal leading-normal text-zinc-500 line-clamp-2">DeLERP- Nội suy Tuyến tính Phân rã để Hợp nhất Mô hình</p>

	</div>
</article>
          
        </div>
      </div>

    </footer>

  </article>

  
  <aside class="md:col-span-1"><div class="lg:sticky lg:top-8"><div class="rounded-2xl p-4 bg-zinc-100 mb-10">

		<img class="aspect-video rounded" src="/images/email-3249062_1280_by-Muhammad-Ribkhan-Pixabay.jpg" alt="Banner Email Marketing">

		<p class="text-right text-xs mt-2 leading-none text-zinc-500">Adversitiment</p>

</div><div class="space-y-6">

		<h2 class="font-bold text-xl mb-8">Recent Post</h2>

		<article class="relative group flex flex-row">
	<a class="insert-link" href="https://aitoday.skyai.vn/posts/2026-02-19/e7afe6/"></a>
	<figure class="basis-1/3 aspect-square overflow-hidden rounded-2xl bg-zinc-100">

		  <img class="object-cover h-full w-full group-hover:scale-105 transition duration-500 cursor-pointer" src="https://www-cdn.anthropic.com/images/4zrzovbb/website/6e00dbffcddc82df5e471c43453abfc74ca94e8d-1000x1000.svg" alt="Anthropic và Chính phủ Rwanda ký biên bản ghi nhớ về AI trong y tế và giáo dục" style="width: 100%; height: 100%; object-fit: cover;" style="width: 100%; height: 100%; object-fit: cover;">

	</figure>
	<div class="basis-2/3 self-center ml-4">
		<h3 class="font-bold group-hover:underline decoration-auto">Anthropic và Chính phủ Rwanda ký biên bản ghi nhớ về AI trong y tế và giáo dục</h3>
	</div>
</article><article class="relative group flex flex-row">
	<a class="insert-link" href="https://aitoday.skyai.vn/posts/2026-02-19/eeb824/"></a>
	<figure class="basis-1/3 aspect-square overflow-hidden rounded-2xl bg-zinc-100">

		  <img class="object-cover h-full w-full group-hover:scale-105 transition duration-500 cursor-pointer" src="https://cdn-avatars.huggingface.co/v1/production/uploads/62d648291fa3e4e7ae3fa6e8/oatOwf8Xqe5eDbCSuYqCd.png" alt="Các kernel CUDA tùy chỉnh cho tất cả mọi người từ Codex và Claude" style="width: 100%; height: 100%; object-fit: cover;" style="width: 100%; height: 100%; object-fit: cover;">

	</figure>
	<div class="basis-2/3 self-center ml-4">
		<h3 class="font-bold group-hover:underline decoration-auto">Các kernel CUDA tùy chỉnh cho tất cả mọi người từ Codex và Claude</h3>
	</div>
</article><article class="relative group flex flex-row">
	<a class="insert-link" href="https://aitoday.skyai.vn/posts/2026-02-19/f475e7/"></a>
	<figure class="basis-1/3 aspect-square overflow-hidden rounded-2xl bg-zinc-100">

		  <img class="object-cover h-full w-full group-hover:scale-105 transition duration-500 cursor-pointer" src="http://image-link" alt="Giới thiệu Claude Sonnet 4.6" style="width: 100%; height: 100%; object-fit: cover;" style="width: 100%; height: 100%; object-fit: cover;">

	</figure>
	<div class="basis-2/3 self-center ml-4">
		<h3 class="font-bold group-hover:underline decoration-auto">Giới thiệu Claude Sonnet 4.6</h3>
	</div>
</article><article class="relative group flex flex-row">
	<a class="insert-link" href="https://aitoday.skyai.vn/posts/2026-02-19/259694/"></a>
	<figure class="basis-1/3 aspect-square overflow-hidden rounded-2xl bg-zinc-100">

		  <img class="object-cover h-full w-full group-hover:scale-105 transition duration-500 cursor-pointer" src="https://cdn-avatars.huggingface.co/v1/production/uploads/1624431552569-noauth.jpeg" alt="Gradio gr.HTML- Một ứng dụng web chỉ với một lần nhấn bằng cách sử dụng gr.HTML" style="width: 100%; height: 100%; object-fit: cover;" style="width: 100%; height: 100%; object-fit: cover;">

	</figure>
	<div class="basis-2/3 self-center ml-4">
		<h3 class="font-bold group-hover:underline decoration-auto">Gradio gr.HTML- Một ứng dụng web chỉ với một lần nhấn bằng cách sử dụng gr.HTML</h3>
	</div>
</article><article class="relative group flex flex-row">
	<a class="insert-link" href="https://aitoday.skyai.vn/posts/2026-02-19/916c74/"></a>
	<figure class="basis-1/3 aspect-square overflow-hidden rounded-2xl bg-zinc-100">

		  <img class="object-cover h-full w-full group-hover:scale-105 transition duration-500 cursor-pointer" src="https://cdn-avatars.huggingface.co/v1/production/uploads/637bfdf60dc13843b468ac20/npxapKcW-cXX3J2JBl2vY.png" alt="IBM và UC Berkeley chẩn đoán lý do các tác nhân doanh nghiệp thất bại bằng cách sử dụng IT-Bench và MAST" style="width: 100%; height: 100%; object-fit: cover;" style="width: 100%; height: 100%; object-fit: cover;">

	</figure>
	<div class="basis-2/3 self-center ml-4">
		<h3 class="font-bold group-hover:underline decoration-auto">IBM và UC Berkeley chẩn đoán lý do các tác nhân doanh nghiệp thất bại bằng cách sử dụng IT-Bench và MAST</h3>
	</div>
</article>
		
	</div>

</div>
</aside>

</div>
  
</main>
  <footer class="bg-zinc-100 py-10 md:py-14"><div class="max-w-7xl mx-auto px-4 md:px-6 lg:px-8">

  <div class="flex flex-wrap space-y-6 mb-4">

    <div class="w-full md:w-3/5 flex flex-col space-y-4 md:pr-8 lg:pr-10">

      <a class="flex items-center group" href="https://aitoday.skyai.vn/">
        <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" fill="currentColor" class="mr-2 group-hover:animate-spin" viewBox="0 0 16 16">
          <path d="M8 11a3 3 0 1 0 0-6 3 3 0 0 0 0 6z"/>
          <path d="M13.997 5.17a5 5 0 0 0-8.101-4.09A5 5 0 0 0 1.28 9.342a5 5 0 0 0 8.336 5.109 3.5 3.5 0 0 0 5.201-4.065 3.001 3.001 0 0 0-.822-5.216zm-1-.034a1 1 0 0 0 .668.977 2.001 2.001 0 0 1 .547 3.478 1 1 0 0 0-.341 1.113 2.5 2.5 0 0 1-3.715 2.905 1 1 0 0 0-1.262.152 4 4 0 0 1-6.67-4.087 1 1 0 0 0-.2-1 4 4 0 0 1 3.693-6.61 1 1 0 0 0 .8-.2 4 4 0 0 1 6.48 3.273z"/>
        </svg>
        
        <span class="text-2xl font-semibold uppercase">AI Today - SkyAI</span>
      </a>

      <p class="font-semibold">
        Theo dõi các tiến bộ mới nhất về Trí tuệ nhân tạo.<br>Trực tiếp từ các nhà phát hành AI trên thế giới.
      </p>

      <p>Đem trí tuệ nhân tạo đến mọi người dân, doanh nghiệp Việt, góp phần giúp Việt Nam phát triển mạnh mẽ trong kỷ nguyên số. Nội dung được cập nhật tự động bằng máy.</p>

    </div>

    <div class="self-center flex flex-col w-full md:w-2/5">

<ul id="social-media" class="flex items-center space-x-4">
	<li>
		<a class="w-12 h-12 rounded-full bg-white hover:bg-zinc-200 flex items-center justify-center p-2" href="https://www.facebook.com/luat.skyai/" target="_blank" rel="noopener noreferrer">
			<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" viewBox="0 0 16 16">
				<path d="M16 8.049c0-4.446-3.582-8.05-8-8.05C3.58 0-.002 3.603-.002 8.05c0 4.017 2.926 7.347 6.75 7.951v-5.625h-2.03V8.05H6.75V6.275c0-2.017 1.195-3.131 3.022-3.131.876 0 1.791.157 1.791.157v1.98h-1.009c-.993 0-1.303.621-1.303 1.258v1.51h2.218l-.354 2.326H9.25V16c3.824-.604 6.75-3.934 6.75-7.951z"/>
			</svg>
		</a>
	</li>
	<li>
		<a class="w-12 h-12 rounded-full bg-white hover:bg-zinc-200 flex items-center justify-center p-2" href="https://www.twitter.com/#" target="_blank" rel="noopener noreferrer">
			<svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" fill="currentColor" viewBox="0 0 16 16">
				  <path d="M12.6.75h2.454l-5.36 6.142L16 15.25h-4.937l-3.867-5.07-4.425 5.07H.316l5.733-6.57L0 .75h5.063l3.495 4.633L12.601.75Zm-.86 13.028h1.36L4.323 2.145H2.865l8.875 11.633Z"/>
			</svg>
		</a>
	</li>
	<li>
		<a class="w-12 h-12 rounded-full bg-white hover:bg-zinc-200 flex items-center justify-center p-2" href="https://www.github.com/#" target="_blank" rel="noopener noreferrer">
			<svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" fill="currentColor" viewBox="0 0 16 16">
				  <path d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.012 8.012 0 0 0 16 8c0-4.42-3.58-8-8-8z"/>
			</svg>
		</a>
	</li>
	<li>
		<a class="w-12 h-12 rounded-full bg-white hover:bg-zinc-200 flex items-center justify-center p-2" href="https://www.instagram.com/#" target="_blank" rel="noopener noreferrer">
			<svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" fill="currentColor" viewBox="0 0 16 16">
				  <path d="M8 0C5.829 0 5.556.01 4.703.048 3.85.088 3.269.222 2.76.42a3.917 3.917 0 0 0-1.417.923A3.927 3.927 0 0 0 .42 2.76C.222 3.268.087 3.85.048 4.7.01 5.555 0 5.827 0 8.001c0 2.172.01 2.444.048 3.297.04.852.174 1.433.372 1.942.205.526.478.972.923 1.417.444.445.89.719 1.416.923.51.198 1.09.333 1.942.372C5.555 15.99 5.827 16 8 16s2.444-.01 3.298-.048c.851-.04 1.434-.174 1.943-.372a3.916 3.916 0 0 0 1.416-.923c.445-.445.718-.891.923-1.417.197-.509.332-1.09.372-1.942C15.99 10.445 16 10.173 16 8s-.01-2.445-.048-3.299c-.04-.851-.175-1.433-.372-1.941a3.926 3.926 0 0 0-.923-1.417A3.911 3.911 0 0 0 13.24.42c-.51-.198-1.092-.333-1.943-.372C10.443.01 10.172 0 7.998 0h.003zm-.717 1.442h.718c2.136 0 2.389.007 3.232.046.78.035 1.204.166 1.486.275.373.145.64.319.92.599.28.28.453.546.598.92.11.281.24.705.275 1.485.039.843.047 1.096.047 3.231s-.008 2.389-.047 3.232c-.035.78-.166 1.203-.275 1.485a2.47 2.47 0 0 1-.599.919c-.28.28-.546.453-.92.598-.28.11-.704.24-1.485.276-.843.038-1.096.047-3.232.047s-2.39-.009-3.233-.047c-.78-.036-1.203-.166-1.485-.276a2.478 2.478 0 0 1-.92-.598 2.48 2.48 0 0 1-.6-.92c-.109-.281-.24-.705-.275-1.485-.038-.843-.046-1.096-.046-3.233 0-2.136.008-2.388.046-3.231.036-.78.166-1.204.276-1.486.145-.373.319-.64.599-.92.28-.28.546-.453.92-.598.282-.11.705-.24 1.485-.276.738-.034 1.024-.044 2.515-.045v.002zm4.988 1.328a.96.96 0 1 0 0 1.92.96.96 0 0 0 0-1.92zm-4.27 1.122a4.109 4.109 0 1 0 0 8.217 4.109 4.109 0 0 0 0-8.217zm0 1.441a2.667 2.667 0 1 1 0 5.334 2.667 2.667 0 0 1 0-5.334z"></path>
			</svg>
		</a>
	</li>
</ul>

    </div>
    
  </div>

  <div class="my-8">
    <ul class="flex items-center space-x-4">
      
        <li><a class="decoration-auto hover:underline font-semibold" href="/">Home</a></li>
      
        <li><a class="decoration-auto hover:underline font-semibold" href="">About</a></li>
      
        <li><a class="decoration-auto hover:underline font-semibold" href="/tags/">Tags</a></li>
      
        <li><a class="decoration-auto hover:underline font-semibold" href="/tags/">Taxonomy</a></li>
      
    </ul>
  </div>

  <div class="border-t pt-4">

    <p class="text-sm">Copyright © 2026. All rights reserved. <a href="https://home.skyai.vn/" target="_blank" rel="noopener">SkyAI.vn</a></p>

  </div>
  
</div>
</footer>
      <script defer src="/js/insertoggle.474f9b0e08021c6519cff4e46df14ccf148285b2d3a23d6321d6e10f25c291fb.js" integrity="sha256-R0&#43;bDggCHGUZz/TkbfFMzxSChbLToj1jIdbhDyXCkfs=" crossorigin="anonymous"></script>
</body>
</html>